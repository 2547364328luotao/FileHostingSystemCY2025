# ğŸ“ é¡¹ç›®ç»“æ„

æœ¬é¡µé¢è¯¦ç»†ä»‹ç»åŸºäºAlistçš„æ–‡ä»¶æ‰˜ç®¡ç³»ç»Ÿçš„é¡¹ç›®ç»“æ„å’Œå„ä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚

## ğŸŒ³ ç›®å½•ç»“æ„

```
FileHostingSystemCY/
â”œâ”€â”€ ğŸ“ src/
â”‚   â””â”€â”€ ğŸ“ main/
â”‚       â”œâ”€â”€ ğŸ“ java/
â”‚       â”‚   â”œâ”€â”€ ğŸ“ controller/          # æ§åˆ¶å™¨å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ FileQuery.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LoginServlet.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LogoutServlet.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MediaFileQuery.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StorageStats.java
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ UploadServlet.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ dao/                 # æ•°æ®è®¿é—®å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MediaFileDAO.java
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ MediaTest.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ db/                  # æ•°æ®åº“å·¥å…·
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ DBUtil.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MediaFileQuery.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StorageStats.java
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ TestDB.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ filter/              # è¿‡æ»¤å™¨
â”‚       â”‚   â”œâ”€â”€ ğŸ“ model/               # æ•°æ®æ¨¡å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MediaFile.java
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ User.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ service/             # ä¸šåŠ¡æœåŠ¡å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LoginServlet.java
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ LogoutServlet.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ test/                # æµ‹è¯•æ–‡ä»¶
â”‚       â”‚   â””â”€â”€ ğŸ“ utils/               # å·¥å…·ç±»
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ AlistRefresher.java
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ AlistTest.java
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ AlistUploader.java
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ AlistUtils.java
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ FileTypeMapper.java
â”‚       â”‚       â””â”€â”€ ğŸ“„ TokenManager.java
â”‚       â””â”€â”€ ğŸ“ webapp/                  # Webèµ„æº
â”‚           â”œâ”€â”€ ğŸ“ css/                 # æ ·å¼æ–‡ä»¶
â”‚           â”œâ”€â”€ ğŸ“ js/                  # JavaScriptæ–‡ä»¶
â”‚           â”œâ”€â”€ ğŸ“ images/              # å›¾ç‰‡èµ„æº
â”‚           â”œâ”€â”€ ğŸ“ WEB-INF/             # Webé…ç½®
â”‚           â”‚   â””â”€â”€ ğŸ“„ web.xml
â”‚           â””â”€â”€ ğŸ“„ *.jsp                # JSPé¡µé¢
â”œâ”€â”€ ğŸ“„ pom.xml                          # Mavené…ç½®
â”œâ”€â”€ ğŸ“„ README.md                        # é¡¹ç›®è¯´æ˜
â””â”€â”€ ğŸ“„ è¯¾ç¨‹è®¾è®¡æ¨¡æ¿.md                   # è¯¾ç¨‹è®¾è®¡æ–‡æ¡£
```

## ğŸ“¦ æ¨¡å—è¯¦ç»†è¯´æ˜

### ğŸ® Controllerå±‚ï¼ˆæ§åˆ¶å™¨å±‚ï¼‰

æ§åˆ¶å™¨å±‚è´Ÿè´£å¤„ç†HTTPè¯·æ±‚å’Œå“åº”ï¼Œæ˜¯Webå±‚çš„æ ¸å¿ƒç»„ä»¶ã€‚

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | ä¸»è¦èŒè´£ |
|--------|----------|----------|
| `FileQuery.java` | æ–‡ä»¶æŸ¥è¯¢æ§åˆ¶å™¨ | å¤„ç†æ–‡ä»¶æœç´¢å’ŒæŸ¥è¯¢è¯·æ±‚ |
| `LoginServlet.java` | ç”¨æˆ·ç™»å½•æ§åˆ¶å™¨ | å¤„ç†ç”¨æˆ·ç™»å½•éªŒè¯ |
| `LogoutServlet.java` | ç”¨æˆ·ç™»å‡ºæ§åˆ¶å™¨ | å¤„ç†ç”¨æˆ·ç™»å‡ºæ“ä½œ |
| `MediaFileQuery.java` | åª’ä½“æ–‡ä»¶æŸ¥è¯¢ | ä¸“é—¨å¤„ç†åª’ä½“æ–‡ä»¶çš„æŸ¥è¯¢ |
| `StorageStats.java` | å­˜å‚¨ç»Ÿè®¡æ§åˆ¶å™¨ | æä¾›å­˜å‚¨ä½¿ç”¨æƒ…å†µç»Ÿè®¡ |
| `UploadServlet.java` | æ–‡ä»¶ä¸Šä¼ æ§åˆ¶å™¨ | å¤„ç†æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ |

### ğŸ—„ï¸ DAOå±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰

æ•°æ®è®¿é—®å±‚å°è£…äº†æ‰€æœ‰æ•°æ®åº“æ“ä½œï¼Œæä¾›æ•°æ®æŒä¹…åŒ–æœåŠ¡ã€‚

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | ä¸»è¦èŒè´£ |
|--------|----------|----------|
| `MediaFileDAO.java` | åª’ä½“æ–‡ä»¶æ•°æ®è®¿é—® | åª’ä½“æ–‡ä»¶çš„CRUDæ“ä½œ |
| `MediaTest.java` | æ•°æ®è®¿é—®æµ‹è¯• | æµ‹è¯•æ•°æ®åº“è¿æ¥å’Œæ“ä½œ |

### ğŸ”§ DBå±‚ï¼ˆæ•°æ®åº“å·¥å…·ï¼‰

æ•°æ®åº“å·¥å…·å±‚æä¾›æ•°æ®åº“è¿æ¥ç®¡ç†å’Œé€šç”¨æ•°æ®åº“æ“ä½œã€‚

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | ä¸»è¦èŒè´£ |
|--------|----------|----------|
| `DBUtil.java` | æ•°æ®åº“è¿æ¥å·¥å…· | ç®¡ç†æ•°æ®åº“è¿æ¥æ±  |
| `MediaFileQuery.java` | åª’ä½“æ–‡ä»¶æŸ¥è¯¢å·¥å…· | æä¾›åª’ä½“æ–‡ä»¶æŸ¥è¯¢æ–¹æ³• |
| `StorageStats.java` | å­˜å‚¨ç»Ÿè®¡å·¥å…· | è®¡ç®—å­˜å‚¨ä½¿ç”¨ç»Ÿè®¡ |
| `TestDB.java` | æ•°æ®åº“æµ‹è¯•å·¥å…· | æµ‹è¯•æ•°æ®åº“è¿æ¥ |

### ğŸ“Š Modelå±‚ï¼ˆæ•°æ®æ¨¡å‹ï¼‰

æ•°æ®æ¨¡å‹å±‚å®šä¹‰äº†ç³»ç»Ÿä¸­çš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | ä¸»è¦èŒè´£ |
|--------|----------|----------|
| `MediaFile.java` | åª’ä½“æ–‡ä»¶æ¨¡å‹ | å®šä¹‰åª’ä½“æ–‡ä»¶çš„æ•°æ®ç»“æ„ |
| `User.java` | ç”¨æˆ·æ¨¡å‹ | å®šä¹‰ç”¨æˆ·çš„æ•°æ®ç»“æ„ |

### ğŸ”§ Serviceå±‚ï¼ˆä¸šåŠ¡æœåŠ¡å±‚ï¼‰

ä¸šåŠ¡æœåŠ¡å±‚å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œåè°ƒå„ä¸ªç»„ä»¶å®Œæˆä¸šåŠ¡åŠŸèƒ½ã€‚

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | ä¸»è¦èŒè´£ |
|--------|----------|----------|
| `LoginServlet.java` | ç™»å½•ä¸šåŠ¡æœåŠ¡ | å®ç°ç”¨æˆ·ç™»å½•ä¸šåŠ¡é€»è¾‘ |
| `LogoutServlet.java` | ç™»å‡ºä¸šåŠ¡æœåŠ¡ | å®ç°ç”¨æˆ·ç™»å‡ºä¸šåŠ¡é€»è¾‘ |

### ğŸ› ï¸ Utilså±‚ï¼ˆå·¥å…·ç±»ï¼‰

å·¥å…·ç±»å±‚æä¾›å„ç§é€šç”¨å·¥å…·å’ŒAlisté›†æˆåŠŸèƒ½ã€‚

| æ–‡ä»¶å | åŠŸèƒ½æè¿° | ä¸»è¦èŒè´£ |
|--------|----------|----------|
| `AlistRefresher.java` | Aliståˆ·æ–°å·¥å…· | åˆ·æ–°Alistç›®å½•ç¼“å­˜ |
| `AlistTest.java` | Alistæµ‹è¯•å·¥å…· | æµ‹è¯•Alist APIè¿æ¥ |
| `AlistUploader.java` | Alistä¸Šä¼ å·¥å…· | å¤„ç†æ–‡ä»¶ä¸Šä¼ åˆ°Alist |
| `AlistUtils.java` | Alisté€šç”¨å·¥å…· | æä¾›Alist APIé€šç”¨æ–¹æ³• |
| `FileTypeMapper.java` | æ–‡ä»¶ç±»å‹æ˜ å°„ | è¯†åˆ«å’Œæ˜ å°„æ–‡ä»¶ç±»å‹ |
| `TokenManager.java` | Tokenç®¡ç†å·¥å…· | ç®¡ç†Alist API Token |

## ğŸŒ Webèµ„æºç»“æ„

### ğŸ“ webappç›®å½•

Webåº”ç”¨çš„æ ¹ç›®å½•ï¼ŒåŒ…å«æ‰€æœ‰å‰ç«¯èµ„æºå’Œé…ç½®æ–‡ä»¶ã€‚

```
webapp/
â”œâ”€â”€ ğŸ“ css/                    # æ ·å¼æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ bootstrap.min.css   # Bootstrapæ¡†æ¶æ ·å¼
â”‚   â”œâ”€â”€ ğŸ“„ custom.css          # è‡ªå®šä¹‰æ ·å¼
â”‚   â””â”€â”€ ğŸ“„ main.css            # ä¸»è¦æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“ js/                     # JavaScriptæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ bootstrap.min.js    # Bootstrapæ¡†æ¶è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ jquery.min.js       # jQueryåº“
â”‚   â”œâ”€â”€ ğŸ“„ upload.js           # æ–‡ä»¶ä¸Šä¼ è„šæœ¬
â”‚   â””â”€â”€ ğŸ“„ main.js             # ä¸»è¦è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ ğŸ“ images/                 # å›¾ç‰‡èµ„æºç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ logo.png            # ç³»ç»ŸLogo
â”‚   â”œâ”€â”€ ğŸ“„ icons/              # å›¾æ ‡æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ backgrounds/        # èƒŒæ™¯å›¾ç‰‡
â”œâ”€â”€ ğŸ“ WEB-INF/                # Webé…ç½®ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ web.xml             # Webåº”ç”¨é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ lib/                # ä¾èµ–åº“æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ index.jsp               # é¦–é¡µ
â”œâ”€â”€ ğŸ“„ login.jsp               # ç™»å½•é¡µé¢
â”œâ”€â”€ ğŸ“„ dashboard.jsp           # ä»ªè¡¨æ¿é¡µé¢
â”œâ”€â”€ ğŸ“„ upload.jsp              # æ–‡ä»¶ä¸Šä¼ é¡µé¢
â”œâ”€â”€ ğŸ“„ files.jsp               # æ–‡ä»¶ç®¡ç†é¡µé¢
â””â”€â”€ ğŸ“„ profile.jsp             # ç”¨æˆ·èµ„æ–™é¡µé¢
```

## ğŸ”„ æ•°æ®æµå‘

### ğŸ“¤ æ–‡ä»¶ä¸Šä¼ æµç¨‹

```
ç”¨æˆ·ç•Œé¢ (JSP) 
    â†“ HTTPè¯·æ±‚
UploadServlet (Controller)
    â†“ ä¸šåŠ¡å¤„ç†
AlistUploader (Utils)
    â†“ APIè°ƒç”¨
AlistæœåŠ¡å™¨
    â†“ å­˜å‚¨ç¡®è®¤
MediaFileDAO (DAO)
    â†“ æ•°æ®æŒä¹…åŒ–
MySQLæ•°æ®åº“
```

### ğŸ“¥ æ–‡ä»¶æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·ç•Œé¢ (JSP)
    â†“ AJAXè¯·æ±‚
FileQuery (Controller)
    â†“ æŸ¥è¯¢å¤„ç†
MediaFileDAO (DAO)
    â†“ æ•°æ®æŸ¥è¯¢
MySQLæ•°æ®åº“
    â†“ ç»“æœè¿”å›
JSONå“åº”
```

### ğŸ‘¤ ç”¨æˆ·è®¤è¯æµç¨‹

```
ç™»å½•é¡µé¢ (login.jsp)
    â†“ è¡¨å•æäº¤
LoginServlet (Controller)
    â†“ éªŒè¯å¤„ç†
User (Model)
    â†“ æ•°æ®åº“æŸ¥è¯¢
DBUtil (DB)
    â†“ ä¼šè¯åˆ›å»º
HttpSession
```

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### ğŸ“„ pom.xml

Mavené¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†é¡¹ç›®ä¾èµ–å’Œæ„å»ºé…ç½®ï¼š

- **é¡¹ç›®ä¿¡æ¯**ï¼šgroupIdã€artifactIdã€version
- **ä¾èµ–ç®¡ç†**ï¼šServlet APIã€MySQLé©±åŠ¨ã€JSONå¤„ç†åº“ç­‰
- **æ„å»ºé…ç½®**ï¼šç¼–è¯‘æ’ä»¶ã€æ‰“åŒ…é…ç½®
- **å±æ€§è®¾ç½®**ï¼šJavaç‰ˆæœ¬ã€ç¼–ç æ ¼å¼ç­‰

### ğŸ“„ web.xml

Webåº”ç”¨é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†Servletæ˜ å°„å’Œåº”ç”¨å‚æ•°ï¼š

- **Servleté…ç½®**ï¼šServletç±»å’ŒURLæ˜ å°„
- **è¿‡æ»¤å™¨é…ç½®**ï¼šå­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ç­‰
- **ä¼šè¯é…ç½®**ï¼šä¼šè¯è¶…æ—¶æ—¶é—´
- **é”™è¯¯é¡µé¢**ï¼šè‡ªå®šä¹‰é”™è¯¯é¡µé¢é…ç½®

## ğŸš€ éƒ¨ç½²ç»“æ„

### ğŸ“¦ WARåŒ…ç»“æ„

ç¼–è¯‘åçš„WARåŒ…ç»“æ„å¦‚ä¸‹ï¼š

```
FileHostingSystem.war
â”œâ”€â”€ ğŸ“ WEB-INF/
â”‚   â”œâ”€â”€ ğŸ“„ web.xml
â”‚   â”œâ”€â”€ ğŸ“ classes/            # ç¼–è¯‘åçš„Javaç±»
â”‚   â”‚   â”œâ”€â”€ ğŸ“ controller/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ dao/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ model/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ service/
â”‚   â”‚   â””â”€â”€ ğŸ“ utils/
â”‚   â””â”€â”€ ğŸ“ lib/                # ä¾èµ–JARæ–‡ä»¶
â”œâ”€â”€ ğŸ“ css/                    # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“ js/                     # JavaScriptæ–‡ä»¶
â”œâ”€â”€ ğŸ“ images/                 # å›¾ç‰‡èµ„æº
â””â”€â”€ ğŸ“„ *.jsp                   # JSPé¡µé¢æ–‡ä»¶
```

### ğŸ”§ è¿è¡Œæ—¶ç»“æ„

åœ¨TomcatæœåŠ¡å™¨ä¸­çš„è¿è¡Œæ—¶ç»“æ„ï¼š

```
Tomcat/
â”œâ”€â”€ ğŸ“ webapps/
â”‚   â””â”€â”€ ğŸ“ FileHostingSystem/  # éƒ¨ç½²çš„åº”ç”¨
â”œâ”€â”€ ğŸ“ work/                   # JSPç¼–è¯‘ç¼“å­˜
â”œâ”€â”€ ğŸ“ logs/                   # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ ğŸ“ conf/                   # é…ç½®æ–‡ä»¶
```

## ğŸ“‹ å¼€å‘è§„èŒƒ

### ğŸ¯ å‘½åè§„èŒƒ

- **ç±»å**ï¼šä½¿ç”¨PascalCaseï¼Œå¦‚`MediaFileDAO`
- **æ–¹æ³•å**ï¼šä½¿ç”¨camelCaseï¼Œå¦‚`uploadFile()`
- **å˜é‡å**ï¼šä½¿ç”¨camelCaseï¼Œå¦‚`fileName`
- **å¸¸é‡å**ï¼šä½¿ç”¨UPPER_SNAKE_CASEï¼Œå¦‚`MAX_FILE_SIZE`
- **åŒ…å**ï¼šä½¿ç”¨å°å†™ï¼Œå¦‚`com.example.controller`

### ğŸ“ ç›®å½•è§„èŒƒ

- **controller**ï¼šå­˜æ”¾æ§åˆ¶å™¨ç±»
- **dao**ï¼šå­˜æ”¾æ•°æ®è®¿é—®å¯¹è±¡
- **model**ï¼šå­˜æ”¾æ•°æ®æ¨¡å‹ç±»
- **service**ï¼šå­˜æ”¾ä¸šåŠ¡æœåŠ¡ç±»
- **utils**ï¼šå­˜æ”¾å·¥å…·ç±»
- **filter**ï¼šå­˜æ”¾è¿‡æ»¤å™¨ç±»

### ğŸ“ ä»£ç è§„èŒƒ

- **æ³¨é‡Š**ï¼šæ¯ä¸ªç±»å’Œæ–¹æ³•éƒ½åº”æœ‰æ¸…æ™°çš„æ³¨é‡Š
- **å¼‚å¸¸å¤„ç†**ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **èµ„æºç®¡ç†**ï¼šåŠæ—¶å…³é—­æ•°æ®åº“è¿æ¥ç­‰èµ„æº
- **æ—¥å¿—è®°å½•**ï¼šé‡è¦æ“ä½œåº”è®°å½•æ—¥å¿—
- **å®‰å…¨æ€§**ï¼šé˜²èŒƒSQLæ³¨å…¥ã€XSSç­‰å®‰å…¨å¨èƒ

---

## ğŸ”— ç›¸å…³é¡µé¢

- [é¦–é¡µ](Wiki-Home.md) - é¡¹ç›®æ¦‚è¿°å’Œæ–‡æ¡£å¯¼èˆª
- [ç³»ç»Ÿæ¶æ„](Wiki-System-Architecture.md) - è¯¦ç»†çš„ç³»ç»Ÿæ¶æ„è®¾è®¡
- [APIæ–‡æ¡£](Wiki-API-Documentation.md) - ç³»ç»ŸAPIæ¥å£æ–‡æ¡£
- [éƒ¨ç½²æŒ‡å—](Wiki-Deployment-Guide.md) - ç³»ç»Ÿéƒ¨ç½²å’Œé…ç½®æŒ‡å—
- [å¼€å‘æŒ‡å—](Wiki-Development-Guide.md) - å¼€å‘ç¯å¢ƒæ­å»ºå’Œå¼€å‘è§„èŒƒ

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´*